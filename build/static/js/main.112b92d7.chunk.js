(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){e.exports=n(258)},106:function(e,t,n){},107:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(98),c=n.n(s),o=(n(106),n(6)),u=n(7),l=n(9),i=n(8),m=n(10),p=n(21),d=n(4),h=(n(107),function(e){var t=e.currentUser,n=e.doLogOut;return r.a.createElement("div",{className:"navbar is-primary"},r.a.createElement(d.c,{className:"navbar-item",to:"/restaurants",exact:!0,activeClassName:"active"},"Restaurants "),r.a.createElement(d.c,{className:"navbar-item",to:"/register",activeClassName:"active"},"Register "),t&&r.a.createElement(d.c,{exact:!0,to:"".concat("/users","/").concat(t._id),activeClassName:"active"},t.username,"'s PROFILE "),t?r.a.createElement(d.c,{className:"navbar-item",to:"/register",activeClassName:"active",onClick:n},"Logout, ",t.username):r.a.createElement(d.c,{className:"navbar-item",to:"/login",activeClassName:"active"},"Login "))}),f=n(1),v=n.n(f),E=n(11),b=n(23),g=(n(117),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",logged:!1},n.changeHandler=function(e){n.setState(Object(b.a)({},e.target.name,e.target.value))},n.onSubmit=function(){var e=Object(E.a)(v.a.mark(function e(t){var a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/users/login",{method:"POST",credentials:"include",body:JSON.stringify(n.state),headers:{"Content-type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,console.log(r),r.user?(n.props.doSetCurrentUser(r.user),n.setState({logged:!0})):n.setState({message:"Username and/or Password incorrect."});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return this.state.logged?r.a.createElement(p.a,{to:"/users/".concat(this.props.currentUser._id)}):r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("h1",{class:"message is-large"},"Login"),r.a.createElement("div",{class:"field"},r.a.createElement("p",{class:"control has-icons-left has-icons-right"},r.a.createElement("input",{class:"input is-large",type:"text",name:"username",placeholder:"Username",value:t,onChange:this.changeHandler}),r.a.createElement("span",{class:"icon is-medium is-left"},r.a.createElement("i",{class:"far fa-smile"})),r.a.createElement("span",{class:"icon is-medium is-right"},r.a.createElement("i",{class:"fas fa-check"})))),r.a.createElement("div",{class:"field"},r.a.createElement("p",{class:"control has-icons-left"},r.a.createElement("input",{class:"input is-large",type:"password",name:"password",placeholder:"Password",value:n,onChange:this.changeHandler}),r.a.createElement("span",{class:"icon is-medium is-left"},r.a.createElement("i",{class:"fas fa-lock"})))),r.a.createElement("button",{class:"button is-link",type:"submit"},"Submit"),r.a.createElement("br",null),this.state.message)}}]),t}(a.Component)),O=(n(118),function(e){var t=e.handleClose,n=e.show,a=e.children,s=n?"modal display-block":"modal display-none";return r.a.createElement("div",{className:s},r.a.createElement("section",{className:"modal-main"},a,r.a.createElement("button",{onClick:t},"Close window")))}),w=(n(119),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={show:!1,username:""},n.showModal=function(){n.setState({show:!0})},n.hideModal=function(){n.setState({show:!1})},n.doGetUser=Object(E.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/users/".concat(n.props.match.params.id));case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),n.deleteRestaurant=function(){var e=Object(E.a)(v.a.mark(function e(t,a){var r,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/users/".concat(n.props.match.params.id,"/restaurants/").concat(t),{method:"DELETE"});case 3:return r=e.sent,e.next=6,r.json();case 6:s=e.sent,n.props.doSetCurrentUser(s.removeRestaurant),n.setState({user:s.user}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}(),n.changeHandler=function(e){n.setState(Object(b.a)({},e.target.name,e.target.value))},n.updateUser=function(){var e=Object(E.a)(v.a.mark(function e(t){var a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/users/".concat(n.props.match.params.id),{method:"PUT",credentials:"include",body:JSON.stringify({username:n.state.username}),headers:{"Content-type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,console.log(r.updateUser),n.props.doSetCurrentUser(r.updateUser),n.setState({show:!1});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Hello, ",this.props.currentUser&&this.props.currentUser.username),r.a.createElement("main",null,r.a.createElement(O,{show:this.state.show,handleClose:this.hideModal},r.a.createElement("form",{onSubmit:function(t){return e.updateUser(t)}},r.a.createElement("input",{onChange:this.changeHandler,type:"text",name:"username",placeholder:"username",value:this.state.username}),r.a.createElement("button",{type:"submit"},"Update!"))),this.props.currentUser&&this.props.currentUser._id===this.props.match.params.id&&r.a.createElement("button",{onClick:this.showModal},"Edit Profile")),this.props.currentUser&&this.props.currentUser.restaurants&&this.props.currentUser.restaurants.map(function(t,n){return r.a.createElement("li",null,r.a.createElement(d.b,{to:t.url},t.name),r.a.createElement("button",{onClick:function(){return e.deleteRestaurant(t.id)}},"Delete"))}))}}]),t}(a.Component)),U=Object(p.f)(w),j=(n(255),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).doAddResturant=function(){var e=Object(E.a)(v.a.mark(function e(t,a){var r,s,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.currentUser,e.next=3,fetch("/restaurants",{method:"POST",credentials:"include",body:JSON.stringify({id:t,name:a,currentUser:r}),headers:{"Content-type":"application/json"}});case 3:return s=e.sent,e.next=6,s.json();case 6:c=e.sent,n.props.doSetCurrentUser(c.user);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.restaurants.map(function(t,n){return r.a.createElement("li",{key:n},r.a.createElement("span",null,r.a.createElement("a",{href:t.url},t.name),"  ",t.price),r.a.createElement("br",null),r.a.createElement("img",{src:t.image_url}),r.a.createElement("br",null),r.a.createElement("small",null,t.categories.map(function(e,t){return r.a.createElement("span",{key:t},e.title)})),r.a.createElement("br",null),e.props.currentUser&&!e.props.currentUser.restaurants.some(function(e){return e.id===t.id})&&r.a.createElement("button",{onClick:function(){return e.doAddResturant(t.id,t.name)}},"Add"),r.a.createElement("br",null))});return r.a.createElement("div",null,r.a.createElement("h3",null,"All restaurants in Los Angeles, CA"),r.a.createElement("ul",null,t))}}]),t}(a.Component)),S=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(i.a)(t).call(this))).getRestaurants=Object(E.a)(v.a.mark(function t(){var n,a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/v1/restaurants");case 3:if((n=t.sent).ok){t.next=6;break}throw Error(n.response.statusText);case 6:return t.next=8,n.json();case 8:a=t.sent,e.setState({restaurants:a.data}),t.next=15;break;case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",t.t0);case 15:case"end":return t.stop()}},t,null,[[0,12]])})),e.state={restaurants:[]},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getRestaurants()}},{key:"render",value:function(){var e=this.state.restaurants,t=this.props.currentUser;return r.a.createElement("div",null,r.a.createElement(j,{doSetCurrentUser:this.props.doSetCurrentUser,restaurants:e,currentUser:t}))}}]),t}(a.Component),y=(n(256),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",logged:!1},n.changeHandler=function(e){n.setState(Object(b.a)({},e.target.name,e.target.value))},n.onSubmit=function(){var e=Object(E.a)(v.a.mark(function e(t){var a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/users",{method:"POST",credentials:"include",body:JSON.stringify(n.state),headers:{"Content-type":"application/json"}});case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,console.log(r),r.user&&(n.props.doSetCurrentUser(r.user),n.setState({logged:!0}));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",null,r.a.createElement("h1",{class:"message is-large"},"Register your account"),this.state.logged?r.a.createElement(p.a,{to:"/users/".concat(this.props.currentUser._id)}):r.a.createElement(C,{changeHandler:this.changeHandler,onSubmit:this.onSubmit,username:t,password:n}))}}]),t}(a.Component)),C=function(e){var t=e.changeHandler,n=e.onSubmit,a=e.username,s=e.password;return r.a.createElement("form",{onSubmit:function(e){return n(e)}},r.a.createElement("div",{class:"field"},r.a.createElement("p",{class:"control has-icons-left has-icons-right"},r.a.createElement("input",{class:"input is-large",onChange:function(e){return t(e)},type:"text",name:"username",placeholder:"Username",value:a}),r.a.createElement("span",{class:"icon is-medium is-left"},r.a.createElement("i",{class:"far fa-smile"})))),r.a.createElement("div",{class:"field"},r.a.createElement("p",{class:"control has-icons-left"},r.a.createElement("input",{class:"input is-large",onChange:function(e){return t(e)},type:"password",name:"password",placeholder:"Password",value:s}),r.a.createElement("br",null),r.a.createElement("span",{class:"icon is-medium is-left"},r.a.createElement("i",{class:"fas fa-lock"})))),r.a.createElement("button",{class:"button is-link",type:"submit"},"Submit"))},x=y,k=(n(257),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={currentUser:null},n.doSetCurrentUser=function(e){return n.setState({currentUser:e})},n.doLogOut=function(){return n.setState({currentUser:null})},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state.currentUser;return r.a.createElement("div",null,r.a.createElement(h,{currentUser:t,doLogOut:this.doLogOut}),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",render:function(){return r.a.createElement("div",null,"ROOT or groot?")}}),r.a.createElement(p.b,{exact:!0,path:"/register",render:function(){return r.a.createElement(x,{currentUser:t,doSetCurrentUser:e.doSetCurrentUser})}}),r.a.createElement(p.b,{exact:!0,path:"/users",render:function(){return r.a.createElement("div",null,"USERS")}}),r.a.createElement(p.b,{exact:!0,path:"".concat("/users","/:id"),render:function(){return r.a.createElement(U,{doSetCurrentUser:e.doSetCurrentUser,currentUser:e.state.currentUser})}}),r.a.createElement(p.b,{exact:!0,path:"/posts",render:function(){return r.a.createElement("div",null,"POSTS")}}),r.a.createElement(p.b,{exact:!0,path:"/restaurants",render:function(){return r.a.createElement(S,{currentUser:t,doSetCurrentUser:e.doSetCurrentUser})}}),r.a.createElement(p.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(g,{currentUser:t,doSetCurrentUser:e.doSetCurrentUser})}}),r.a.createElement(p.b,{render:function(){return r.a.createElement("div",null,"NOT FOUND")}})))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(d.a,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[101,1,2]]]);
//# sourceMappingURL=main.112b92d7.chunk.js.map